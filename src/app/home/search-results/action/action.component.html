<form #actionForm="ngForm">
    <ng-template #modal let-modal>
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Policy Change</h4>
            <div class="col-lg-5"></div>
            <br>
        </div>
        <div class="modal-body">
            <div>
                <label for="newEndorsementNumber">Endorsement Number</label>
                <input type="text" class="form-control" id="newEndorsementNumber" [required]="canEdit"
                    [readonly]="!canEdit" name="newEndorsementNumber" [(ngModel)]="endorsementActionInfo.newEndorsementNumber"
                    max="999" maxlength="3" (keyup)="checkEndorsementNumber()">
            </div>
            <div [hidden]="isNewEndorsementNumberValid" class="alert alert-danger">
                This Endorsement Number has already been used.
            </div>
            <div>
                <label for="transactionType">Transaction Type</label>
                <ng-select id="transactionType" [required]="canEdit" [items]="transactionTypes"
                    bindLabel="description" bindValue="key" [clearable]="false" [readonly]="!canEdit"
                    name="transactionType" [(ngModel)]="endorsementActionInfo.transactionType">
                </ng-select>
            </div>
            <div>
                <label for="endtReason">Endorsement Reason</label>
                <ng-select id="endtReason" [required]="canEdit" [items]="endorsementReasons"
                    bindLabel="description" bindValue="code" [clearable]="false" [readonly]="!canEdit" name="endtReason"
                    [(ngModel)]="endorsementActionInfo.endorsementReason">
                </ng-select>
            </div>
            <label for="transEffectiveDate">Transaction Effective Date</label>
            <input style="display: inline-block; max-width: 75%;" matInput [matDatepicker]="transEffectiveDateCalendar"
              class="form-control" required [disabled]="!canEdit" [ngModel]="endorsementActionInfo.transEffectiveDate"
              (ngModelChange)="endorsementActionInfo.transEffectiveDate=$event" (blur)="checkTransEffectiveDate()"
              name="transEffectiveDate" #transEffectiveDate="ngModel">
            <mat-datepicker-toggle matSuffix style="display: inline-block;" [for]="transEffectiveDateCalendar">
            </mat-datepicker-toggle>
            <mat-datepicker #transEffectiveDateCalendar></mat-datepicker>
            <div [hidden]="isTransEffectiveValid" class="alert alert-danger">
                Invalid Transactive Effective Date. Must be within policy period.
            </div>
            <label for="transExpirationDate">Transaction Expiration Date</label>
            <input style="display: inline-block; max-width: 75%;" matInput [matDatepicker]="transExpirationDateCalendar"
              class="form-control" required [disabled]="!canEdit" [ngModel]="endorsementActionInfo.transExpirationDate"
              (ngModelChange)="endorsementActionInfo.transExpirationDate=$event" (blur)="checkExpirationDate()"
              name="transExpirationDate" #transExpirationDate="ngModel">
            <mat-datepicker-toggle matSuffix style="display: inline-block;" [for]="transExpirationDateCalendar">
            </mat-datepicker-toggle>
            <mat-datepicker #transExpirationDateCalendar></mat-datepicker>
            <div [hidden]="isTransExpirationValid" class="alert alert-danger">
                Invalid Transactive Expiration Date. 
            </div>
            <div>
                <label for="premium">Premium</label>
                <input type="text" class="form-control" id="premium" [required]="canEdit" [readonly]="!canEdit"
                    name="premium" [(ngModel)]="endorsementActionInfo.premium" #premium="ngModel" mask="separator.0"
                    thousandSeparator=",">
            </div>
        </div>
        <div class="modal-footer">           
             <button type="button" class="btn btn-danger" (click)="submit()" [disabled]="!actionForm.form.valid">Submit</button>
                <button type="button" class="btn btn-secondary" (click)="clearAndClose()" >Cancel</button>
        </div>
    </ng-template>
    <div *ngIf="showBusy">
        <rsps-busy></rsps-busy>
      </div>
