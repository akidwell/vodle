<form #endorsementHeaderForm="ngForm">
<div class="endorsement-header">
  <div class="row">
    <div class="col-lg-2">
      <label for="transactionEffectiveDate">Trans Eff Date</label>
      <input style="display: inline-block; max-width: 80%;" matInput [matDatepicker]="endorsementEffectiveDateCalendar"
        class="form-control" [required]="canEditTransactionDates" [disabled]="!canEditTransactionDates" [readonly]="isRewrite"
        [(ngModel)]="endorsement.transactionEffectiveDate" (dateChange)="changeEffectiveDate()"
        name="transactionEffectiveDate" #transactionEffectiveDate="ngModel">
      <mat-datepicker-toggle matSuffix style="display: inline-block; max-width: 20%;"
        [for]="endorsementEffectiveDateCalendar">
      </mat-datepicker-toggle>
      <mat-datepicker #endorsementEffectiveDateCalendar></mat-datepicker>
      <div *ngIf="!isTransactionEffectiveDateValid" class="alert alert-danger">
        Invalid date
      </div>
    </div>
    <div class="col-lg-2">
      <label for="endorsementExpirationDate">Trans Exp Date</label>
      <input style="display: inline-block; max-width: 80%;" matInput [matDatepicker]="transactionExpirationDateCalendar"
        class="form-control" [required]="canEditTransactionDates" [disabled]="!canEditTransactionDates" [readonly]="isRewrite"
        [(ngModel)]="endorsement.transactionExpirationDate" (dateChange)="changeExpirationDate()"
        name="transactionExpirationDate" #transactionExpirationDate="ngModel">
      <mat-datepicker-toggle matSuffix style="display: inline-block; max-width: 20%;"
        [for]="transactionExpirationDateCalendar">
      </mat-datepicker-toggle>
      <mat-datepicker #transactionExpirationDateCalendar></mat-datepicker>
      <div *ngIf="!isTransactionExpirationDateValid" class="alert alert-danger">
        Invalid date
      </div>
    </div>
    <div class="col-lg-2">
      <label for="transactionType">Transaction Type</label><br>
      <ng-select id="transactionType" [items]="transactionTypes" bindLabel="description" bindValue="key"
        [required]="canEditTransactionType" [clearable]="false" [searchFn]="dropDownSearch" (change)="clearAllTransactionTypeSpecificData($event)"
        [readonly]="!canEditTransactionType" [(ngModel)]="endorsement.transactionTypeCode" name = "transactionType">
      </ng-select>
    </div>
    <div class="col-lg">
      <label for="premium">Premium</label>
      <input type="text" class="form-control" id="premium" [required]="canEdit" [readonly]="!canEdit"
        [(ngModel)]="endorsement.premium" string-to-currency name="premium" #premium="ngModel">
    </div>
    <div class="col-lg">
      <label for="attachmentPoint">Attachment Point</label>
      <input type="text" class="form-control" id="attachmentPoint" [required]="canEditAttachmentPoint"
        [readonly]="!canEditAttachmentPoint" [(ngModel)]="endorsement.attachmentPoint" string-to-currency [allowNegative]="false"
        name="attachmentPoint" #attachmentPoint="ngModel" name="attachmentPoint" (change)="checkAttachmentPointValid()">
    </div>
    <div class="col-lg">
      <label for="underlyingLimit">Underlying Limits</label>
      <input type="text" class="form-control" id="underlyingLimit" [required]="canEditUnderlyingLimits" [readonly]="!canEditUnderlyingLimits"
      (change)="checkAttachmentPointValid()" [(ngModel)]="endorsement.underlyingLimit" string-to-currency [allowNegative]="false" name="underlyingLimit" #underlyingLimit="ngModel">
    </div>
    <div class="col-lg">
      <label for="sir">SIR</label>
      <input type="text" class="form-control" id="sir" [readonly]="!canEdit"
        [(ngModel)]="endorsement.sir" string-to-currency [allowNegative]="false" name="sir" #sir="ngModel">
    </div>
    <div class="col-lg-1">
      <label for="terrorism">Terrorism</label>
      <ng-select id="terrorism" [items]="terrorismCodes$ | async" bindLabel="description" bindValue="code"
        [required]="canEdit" [clearable]="false" [searchFn]="dropDownSearch" (change)="changeTerrorism()"
        [readonly]="!canEdit" [(ngModel)]="endorsement.terrorismCode" name = "terrorism">
        <ng-template ng-label-tmp let-item="item">
          {{item.code}}
        </ng-template>
        <ng-template ng-option-tmp let-item="item">
          {{item.code}} - {{item.description}}
        </ng-template>
      </ng-select>
    </div>
  </div>
  <div class="row">

    <div class="col-md-4"></div>
    <div class="col-lg-3" *ngIf="isExtensionDateSelected()">
      <label for="policyExtendedExpDate" class="form-label" title="Extension Date">Extension Date</label>
      <div *ngIf="canEdit">
        <input style="display: inline-block; max-width: 80%;" matInput
          [required]="isExtensionDateSelected()"
          [matDatepicker]="policyExtendedExpDateCalendar" class="form-control"
          [(ngModel)]="policyInfo.policyExtendedExpDate" name="policyExtendedExpDate"
          #policyExtendedExpDate="ngModel">
        <mat-datepicker-toggle matSuffix style="display: inline-block; max-width: 20%;" [for]="policyExtendedExpDateCalendar">
        </mat-datepicker-toggle>
        <mat-datepicker #policyExtendedExpDateCalendar></mat-datepicker>
      </div>
      <div *ngIf="!canEdit">
        <input type="text" class="form-control" id="policyExtendedExpDate" readonly
          [ngModel]="policyInfo.policyExtendedExpDate | date:'MM/dd/yyyy'" name="policyExtendedExpDate">
      </div>
    </div>
    <div *ngIf="isCancelSelected()" class="col-lg-3">
      <label for="policyCancelDate" class="form-label" title="Cancel Date">Cancel Date</label>
      <div *ngIf="canEdit">
        <input style="display: inline-block; max-width: 80%;" matInput
          [required]="isCancelSelected()"
          [matDatepicker]="policyCancelDateCalendar" class="form-control"
          [(ngModel)]="policyInfo.policyCancelDate" name="policyCancelDate" #policyCancelDate="ngModel">
        <mat-datepicker-toggle matSuffix style="display: inline-block; max-width: 20%;" [for]="policyCancelDateCalendar">
        </mat-datepicker-toggle>
        <mat-datepicker #policyCancelDateCalendar></mat-datepicker>
      </div>
      <div *ngIf="!canEdit">
        <input type="text" class="form-control" id="policyCancelDateReadonly" [readonly]="isReadOnly"
          [ngModel]="policyInfo.policyCancelDate | date:'MM/dd/yyyy'" name="policyCancelDateReadonly">
      </div>
    </div>
  </div>
</div>
