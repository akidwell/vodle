<div class="card">
    <div *ngIf="isSaving">
        <div class="spinner-wrapper">
            <h3>
                <span class="badge rounded-pill">Refreshing...
                    <div class="spinner-border small"></div>
                </span>
            </h3>
        </div>
    </div>
    <div class="card-header" (click)="collapse.toggle()">
        Disclaimers - On Policy ({{onPolicyDisclaimersCount}})
        <fa-icon style="float: right" [icon]="faAngleDown" *ngIf="collapsed"></fa-icon>
        <fa-icon style="float: right" [icon]="faAngleUp" *ngIf="!collapsed"></fa-icon>
    </div>
    <div #collapse="ngbCollapse" [(ngbCollapse)]="collapsed">
        <div class="card-body">
            <div class="row">
                <div class="col-lg-6">
                    <label class="form-label" title="View">View:</label>
                    <div class="btn-group margin-left" role="group" aria-label="Basic radio toggle button group">
                        <input validate-on-change type="radio" class="btn-check" name="btnradio1" id="radioAllDis" autocomplete="off"
                            (click)="selectDisclaimerView(disclaimerViewType.Available)" click-stop-propogation>
                        <label class="btn btn-outline-dark hide-select" for="radioAllDis">Available
                            ({{allDisclaimersCount}})</label>
                        <input validate-on-change type="radio" class="btn-check" name="btnradio1" id="radioMandatoryDis" autocomplete="off"
                            (click)="selectDisclaimerView(disclaimerViewType.Mandatory)">
                        <label class="btn btn-outline-dark hide-select" for="radioMandatoryDis">Mandatory
                            ({{mandatoryDisclaimersCount}})</label>
                        <input validate-on-change type="radio" class="btn-check" name="btnradio1" id="radioOpt" autocomplete="off"
                            (click)="selectDisclaimerView(disclaimerViewType.Optional)">
                        <label class="btn btn-outline-dark hide-select" for="radioOpt">Optional
                            ({{optionalDisclaimersCount}})</label>
                        <input validate-on-change type="radio" class="btn-check" name="btnradio1" id="radioOnPol" autocomplete="off"
                            checked (click)="selectDisclaimerView(disclaimerViewType.OnPolicy)">
                        <label class="btn btn-outline-dark hide-select" for="radioOnPol">On Policy
                            ({{onPolicyDisclaimersCount}})</label>
                        <input validate-on-change *ngIf="quote.submission.expiringPolicyId ?? 0 > 0" type="radio" class="btn-check"
                            name="btnradio1" id="radioExp" autocomplete="off"
                            (click)="selectDisclaimerView(disclaimerViewType.Expiring)">
                    </div>
                </div>
                <div class="col-lg-6" style="padding-top:10px" (click)="userDefinedPopup()">
                    <a style="float: right; padding-right: 20px;color: #00274e; cursor: pointer">Add User Defined
                        Disclaimer</a>
                </div>
            </div>
        </div>
        <div class="card-body table-body">
            <div class="table-responsive">
                <table class="table table-striped table-bordered" *ngIf="true">
                    <thead>
                        <tr>

                            <th style="text-align:center;">Included</th>
                            <th nowrap>ID</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let dis of filteredDisclaimers">
                            <td style="text-align:center; width:1%;">
                                <input validate-on-change [fullValidate]="true" type="checkbox" class="form-check-input" id="included"
                                    [ngClass]="!dis.isIncluded && dis.ysnDefault ? 'mandatory' : ''"
                                    [readonly]="!canEdit" [(ngModel)]="dis.isIncluded" name="included"
                                    click-stop-propagation>
                            </td>
                            <!-- <td style="border-left-style: hidden;width:1%;">
                                <fa-icon *ngIf="false" class="faCircleE fa-l"
                                    ngbTooltip="Optional Form selected on Expiring Submission" [icon]="faCircleE">
                                </fa-icon>
                            </td> -->
                            <td style="width:1%; white-space: nowrap;">
                                {{dis.disclaimerDesc}}
                            </td>
                            <td>{{dis.description}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- <div class="d-flex justify-content-center" *ngIf="showExpiring && expiringFormsLoading">
            <strong>Loading...</strong>
            <div class="spinner-border ml-auto" role="status" aria-hidden="true"></div>
        </div>
        <div *ngIf="showExpiring" class="card-body table-body">
            <div class="table-responsive">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th nowrap>Endorsement #</th>
                            <th nowrap>Form Number</th>
                            <th>Title</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let form of expiringForms">
                            <td style="width:1%;">
                                <span *ngIf="form.firstEndorsementRow">{{form.endorsementNumber}}</span>
                            </td>
                            <td style="width:1%;">
                                {{form.formName}}
                            </td>
                            <td >{{form.formTitle}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div> -->
    </div>
    <div class="card-footer">
        <div class="footer-count">Disclaimers: {{filteredDisclaimers.length}}/{{disclaimers.length}}</div>
    </div>
</div>
<rsps-scroll-to-top></rsps-scroll-to-top>
<form #userForm="ngForm">
    <ng-template #userModal let-modal>
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">User Defined Disclaimer</h4>
            <div class="col-lg-5"></div>
            <br>
        </div>
        <div class="modal-body modal-xl">
            <div>
                <label for="documentType">Document Type</label>
                <ng-select id="documentType" [required]="canEdit" [items]="documentType" [clearable]="false"
                    [readonly]="!canEdit" name="documentType" [(ngModel)]="userDefinedInfo.document">
                </ng-select>
            </div>
            <div>
                <label for="condition">Disclaimer List</label>
                <ng-select id="description" [items]="disclaimers" [clearable]="false" [readonly]="!canEdit"
                    name="description" [(ngModel)]="userDefinedInfo.description" bindLabel="description"
                    bindValue="subjectivityDesc" (change)="updateDescription($event)">
                </ng-select>
                <ng-template ng-label-tmp let-item="item">
                    {{item.subjectivityDesc}} - {{item.description}}
                </ng-template>
                <ng-template ng-option-tmp let-item="item">
                    {{item.subjectivityDesc}} - {{item.description}}
                </ng-template>
            </div>
            <div>
                <label for="description">Description</label>
                <textarea style="height:125px" [readonly]="false" type="text" class="form-control" id="premium"
                    [required]="canEdit" autocomplete="off" name="premium" [(ngModel)]="desc"
                    #premium="ngModel"></textarea>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" (click)="submit()"
                    [disabled]="!userForm.form.valid">Submit</button>
                <button type="button" class="btn btn-secondary" (click)="clearAndClose()">Cancel</button>
            </div>
        </div>
    </ng-template>
    <!-- <div *ngIf="showBusy">
        <rsps-busy></rsps-busy>
    </div> -->
</form>