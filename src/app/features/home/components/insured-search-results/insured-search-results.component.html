<div class="card">
  <div class="card-header" (click)="collapsed = !collapsed">Insured Accounts
    <fa-icon style="float: right" [icon]="faAngleDown" *ngIf="collapsed"></fa-icon>
    <fa-icon style="float: right" [icon]="faAngleUp" *ngIf="!collapsed"></fa-icon>
  </div>
  <div #collapse="ngbCollapse" [(ngbCollapse)]="collapsed">
    <div class="col-lg-4">
      <input type="search" class="form-control" type="search"  id="filter" name="filter"
          maxlength="250" #filter="ngModel" placeholder="Filter"
          [(ngModel)]="insuredSearchResultsService.filter" autocomplete="off">
  </div>
    <div style="overflow-x: scroll">
      <table class="table table-striped table-bordered" *ngIf="insuredResults.length">
        <thead>
          <tr>
            <th>Insured Code</th>
            <th sortable="name" (sort)="onSort($event)">Search Name</th>
            <th>Street Address</th>
            <th sortable="insuredCity" (sort)="onSort($event)">Insured City</th>
            <th sortable="insuredState" (sort)="onSort($event)">Insured State</th>
            <th>Zip</th>
            <th sortable="insuredName" (sort)="onSort($event)">Named Insured</th>
            <th>Former Name</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let insured of insureds$ | async ; let i = index">
            <ng-container>
              <td><a [routerLink]="[]" (click)="routeToInsured(insured.insuredCode)">
              <td nowrap>{{ insured.insuredCode }}</td></a></td>
              <td>{{ insured.name }}</td>
              <td>{{ insured.streetAddress }}</td>
              <td>{{ insured.insuredCity }}</td>
              <td>{{ insured.insuredState }}</td>
              <td nowrap>{{ insured.zip | zipCode }}</td>
              <td>{{ insured.insuredName }}</td>
              <td>{{ insured.formerName }} <br> {{ insured.formerName2 }}</td>
            </ng-container>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="d-flex justify-content-between p-2 paging">
      <ngb-pagination size="sm" [collectionSize]="(total$ | async)!" [(page)]="insuredSearchResultsService.page"
          [pageSize]="insuredSearchResultsService.pageSize" [maxSize]="5" [rotate]="true" [boundaryLinks]="true">
      </ngb-pagination>
      <select class="pagination" name="pageSize" [(ngModel)]="insuredSearchResultsService.pageSize">
          <option [ngValue]="8">8 items per page</option>
          <option [ngValue]="12">12 items per page</option>
          <option [ngValue]="15">15 items per page</option>
      </select>
  </div>
  </div>
  <div class="card-footer">
    <button *ngIf="canEditInsured" class="footer-button"
      (click)="routeToNewInsured()">Add Insured</button>
    <div class="footer-count">Results:{{insuredResults.length}}</div>
  </div>
